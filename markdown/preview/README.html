<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>xhr-wrapper (http)</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css" />
</head>

<body>
    <article class="markdown-body"><h1 id="xhr-wrapper-(http)">xhr-wrapper (http)</h1>
<p>A lightweight JavaScript XHR wrapper.</p>
<h5 id="table-of-contents">Table of Contents</h5>
<ul class="list">
<li><a href="#project-setup">Project Setup</a></li>
<li><a href="#what-it-does">What It Does</a></li>
<li><a href="#add-to-project">Add To Project</a></li>
<li><a href="#api">API</a><ul class="list">
<li><a href="#global-api">Global</a></li>
<li><a href="#instance-api">Instance</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a><ul class="list">
<li><a href="#usage-examples">Examples</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#todo">TODO</a></li>
<li><a href="#license">License</a></li>
</ul>
<p><a name="project-setup"></a></p>
<h3 id="project-setup">Project Setup</h3>
<p>Project uses <a href="https://github.com/cgabriel5/snippets/tree/master/boilerplate/application">this</a> boilerplate. Its <a href="https://github.com/cgabriel5/snippets/blob/master/boilerplate/application/README.md#-read-before-use">README.md</a> contains instructions for <code>Yarn</code> and <code>Gulp</code>.</p>
<p><a name="what-it-does"></a></p>
<h3 id="what-it-does">What It Does</h3>
<ul class="list">
<li>Provides a wrapper for the <code>XMLHttpRequest</code> Object.</li>
<li>Uses JavaScript Promises.</li>
<li>Allows for cancelable XHR calls.</li>
</ul>
<p><a name="add-to-project"></a></p>
<h3 id="add-to-project">Add To Project</h3>
<p><strong>Note</strong>: The library, both minimized and unminimized, is located in <code>lib/</code>.</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"path/to/lib.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">    "use strict"</span>;
    <span class="hljs-comment">// once all resources have loaded</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.readyState == <span class="hljs-string">"complete"</span>) {
        <span class="hljs-comment">// get the library</span>
        <span class="hljs-keyword">var</span> http = <span class="hljs-built_in">window</span>.app.libs.http;
        <span class="hljs-comment">// logic...</span>
    }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre><p><a name="api"></a></p>
<h2 id="api">API</h2>
<p><a name="global-api"></a></p>
<h3 id="api-&mdash;-global">API &mdash; Global</h3>
<p><a name="global-methods-toc"></a></p>
<ul class="list">
<li><a href="#global-methods-abortall">➜ global.abortAll()</a></li>
</ul>
<p><a name="global-methods-long"></a></p>
<h3 id="global-methods">Global Methods</h3>
<p><a name="global-methods-abortall"></a>
➜ <strong>global.abortAll</strong> &mdash; Aborts all pending requests.</p>
<ul class="list">
<li><strong>No Parameters</strong></li>
<li><strong>Returns</strong> Nothing.</li>
</ul>
<pre class="hljs"><code>http.abortAll();</code></pre><p><a name="instance-api"></a></p>
<h3 id="api-&mdash;-instance">API &mdash; Instance</h3>
<p><a name="instance-methods-toc"></a></p>
<ul class="list">
<li><a href="#instance-creation">Instance</a><ul class="list">
<li><a href="#instance-methods-url">➜ instance.url()</a></li>
<li><a href="#instance-methods-data">➜ instance.data()</a></li>
<li><a href="#instance-methods-method">➜ instance.method()</a></li>
<li><a href="#instance-methods-fileupload">➜ instance.fileUpload()</a></li>
<li><a href="#instance-methods-processdata">➜ instance.processData()</a></li>
<li><a href="#instance-methods-postjson">➜ instance.postJSON()</a></li>
<li><a href="#instance-methods-parsejson">➜ instance.parseJSON()</a></li>
<li><a href="#instance-methods-withcredentials">➜ instance.withCredentials()</a></li>
<li><a href="#instance-methods-cache">➜ instance.cache()</a></li>
<li><a href="#instance-methods-async">➜ instance.async()</a></li>
<li><a href="#instance-methods-header">➜ instance.header()</a></li>
<li><a href="#instance-methods-id">➜ instance.id()</a></li>
<li><a href="#instance-methods-responsetype">➜ instance.responseType()</a></li>
<li><a href="#instance-methods-timeout">➜ instance.timeout()</a></li>
<li><a href="#instance-methods-events">➜ instance.events()</a></li>
<li><a href="#instance-methods-run">➜ instance.run()</a></li>
<li><a href="#instance-methods-getprop">➜ instance.getProp()</a></li>
<li><a href="#instance-methods-abort">➜ instance.abort()</a></li>
</ul>
</li>
</ul>
<p><a name="instance-creation"></a></p>
<h3 id="instance-creation">Instance Creation</h3>
<ul class="list">
<li><code>url</code> (<code>String</code>, <em>Optional</em>)<ul class="list">
<li>Internally defaults to <code>document.URL</code> when nothing explicitly set.</li>
<li>Can be provided later via <code>instance.url</code>.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<p><strong>Note</strong>: Using the <code>new</code> keyword is not necessary. The library will make sure to use it for when when you don&#39;t. </p>
<pre class="hljs"><code><span class="hljs-comment">// this...</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http();
<span class="hljs-comment">// is the same as this</span>
<span class="hljs-keyword">var</span> req = http();

<span class="hljs-comment">// instance with url</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"posts.php?foo=bar"</span>);</code></pre><p><a name="instance-methods-long"></a></p>
<h3 id="instance-methods">Instance Methods</h3>
<p><a name="instance-methods-url"></a>
➜ <strong>instance.url(<code>url</code>)</strong> &mdash; Sets the request url.</p>
<ul class="list">
<li><code>url</code> (<code>String</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>document.URL</code> when nothing explicitly set.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.url(<span class="hljs-string">"posts.php?foo=bar"</span>);</code></pre><p><a name="instance-methods-data"></a>
➜ <strong>instance.data(<code>data</code>)</strong> &mdash; Sets the request data.</p>
<ul class="list">
<li><code>data</code> (<code>String|Object|FormData</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>null</code> when nothing explicitly set.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">// String Data</span>
req.data(<span class="hljs-string">"msg=Hello World!&amp;name=Selena Gomez"</span>);

<span class="hljs-comment">// Object Data</span>
req.data({ <span class="hljs-string">"msg"</span>: <span class="hljs-string">"Hello World!!"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Selena Gomez"</span> });

<span class="hljs-comment">// FormData</span>
req.data(<span class="hljs-keyword">new</span> FormData());</code></pre><p><a name="instance-methods-method"></a>
➜ <strong>instance.method(<code>type</code>)</strong> &mdash; Sets the request method.</p>
<ul class="list">
<li><code>type</code> (<code>String</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>&quot;GET&quot;</code> when nothing explicitly set.</li>
<li>Case insensitive.</li>
<li>Possible values: <code>&quot;GET&quot;</code>, <code>&quot;POST&quot;</code>, <code>&quot;PUT&quot;</code>, <code>&quot;DELETE&quot;</code>, <code>&quot;HEAD&quot;</code>, <code>&quot;OPTIONS&quot;</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.method(<span class="hljs-string">"POST"</span>);</code></pre><p><a name="instance-methods-fileupload"></a>
➜ <strong>instance.fileUpload(<code>flag</code>)</strong> &mdash; Sets the <code>fileUpload</code> flag indicating whether files are being uploaded.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>false</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.fileUpload(<span class="hljs-literal">true</span>);</code></pre><p><a name="instance-methods-processdata"></a>
➜ <strong>instance.processData(<code>flag</code>)</strong> &mdash; Sets the <code>processData</code> flag indicating whether the passed data should be processed.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>true</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<p><strong>Note</strong>: Setting flag to true will only process strings and objects.</p>
<pre class="hljs"><code>req.processData(<span class="hljs-literal">true</span>);</code></pre><p><a name="instance-methods-postjson"></a>
➜ <strong>instance.postJSON(<code>flag</code>)</strong> &mdash; Sets the <code>postJSON</code> flag indicating whether the data should be stringified.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>false</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.postJSON(<span class="hljs-literal">true</span>);</code></pre><p><a name="instance-methods-parsejson"></a>
➜ <strong>instance.parseJSON(<code>flag</code>)</strong> &mdash; Sets the <code>parseJSON</code> flag indicating whether the responded data should be parse with <code>JSON.parse</code>.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>false</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<p><strong>Note</strong>: Setting flag to true will try to parse the returned data with <code>JSON.parse</code> and add the result to the <code>XHR</code> object under the custom property <code>responseJSON</code>. This property defaults to a value of <code>null</code>.</p>
<pre class="hljs"><code>req.parseJSON(<span class="hljs-literal">true</span>);</code></pre><p><a name="instance-methods-withcredentials"></a>
➜ <strong>instance.withCredentials(<code>flag</code>)</strong> &mdash; Sets the <code>withCredentials</code> flag indicating whether CORS needs to be used.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>false</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.withCredentials(<span class="hljs-literal">false</span>);</code></pre><p><a name="instance-methods-cache"></a>
➜ <strong>instance.cache(<code>flag</code>)</strong> &mdash; Sets the <code>cache</code> flag indicating whether cache the request.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>false</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.cache(<span class="hljs-literal">false</span>);</code></pre><p><a name="instance-methods-async"></a>
➜ <strong>instance.async(<code>flag</code>)</strong> &mdash; Sets the <code>async</code> flag indicating whether request will be async or not.</p>
<ul class="list">
<li><code>flag</code> (<code>Boolean</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>true</code> when nothing explicitly set.</li>
<li>Possible values: <code>true</code>, <code>false</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.async(<span class="hljs-literal">true</span>);</code></pre><p><a name="instance-methods-header"></a>
➜ <strong>instance.header(<code>headerName</code>, <code>headerValue</code>)</strong> &mdash; Sets the a request header.</p>
<ul class="list">
<li><code>headerName</code> (<code>String</code>, <em>Required</em>)</li>
<li><code>headerValue</code> (<code>String</code>, <em>Required</em>)</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<p><strong>Note</strong>: When a <code>Content-Type</code> header is not explicitly set it will be set with a default value of <code>&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</code>. However, when uploading files, <code>instance.fileUpload(true)</code>, the header is left out to let the browser determine the proper and correct content-type and form boundaries. Information about form boundaries can be found <a href="https://stackoverflow.com/q/12348216">here</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#A_brief_introduction_to_the_submit_methods">here</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#multipartform-data">here</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition#As_a_header_for_a_multipart_body">here</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type#Directives">here</a>. </p>
<pre class="hljs"><code>req.header(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded;charset=UTF-8"</span>);</code></pre><p><a name="instance-methods-id"></a>
➜ <strong>instance.id(<code>id</code>)</strong> &mdash; Sets the request ID.</p>
<ul class="list">
<li><code>id</code> (<code>String</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to a randomly generated ID when nothing explicitly set.</li>
<li><code>id</code> is meant to be used with a future (not yet implemented) global <code>http.get</code> method to access request from anywhere in your code.</li>
<li><strong>Note</strong>: <code>id</code> must be unique.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.id(<span class="hljs-string">"some-unique-string-id"</span>);</code></pre><p><a name="instance-methods-responsetype"></a>
➜ <strong>instance.responseType(<code>type</code>)</strong> &mdash; Sets the request <code>responseType</code>.</p>
<ul class="list">
<li><code>type</code> (<code>String</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>&quot;&quot;</code> when nothing explicitly set.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.responseType(<span class="hljs-string">"json"</span>);</code></pre><p><a name="instance-methods-timeout"></a>
➜ <strong>instance.timeout(<code>time</code>)</strong> &mdash; Sets the request <code>timeout</code> time.</p>
<ul class="list">
<li><code>time</code> (<code>Number</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>10000</code> (10 seconds) when nothing explicitly set.</li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.timeout(<span class="hljs-number">5000</span>); <span class="hljs-comment">// 5 seconds</span></code></pre><p><a name="instance-methods-events"></a>
➜ <strong>instance.events(<code>events</code>)</strong> &mdash; Sets the request <code>events</code>.</p>
<ul class="list">
<li><code>events</code> (<code>Object</code>, <em>Required</em>)<ul class="list">
<li>Internally defaults to <code>{}</code>, empty events object (no events), when nothing explicitly set.</li>
<li>Supported events: <code>abort</code>, <code>timeout</code>, <code>progress</code>, <code>loadstart</code>, <code>loadend</code>, <code>readystatechange</code>, <code>load</code>, <code>error</code></li>
</ul>
</li>
<li><strong>Returns</strong> instance.</li>
</ul>
<pre class="hljs"><code>req.events({
    <span class="hljs-string">"abort"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> },
    <span class="hljs-string">"timeout"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> },
    <span class="hljs-string">"progress"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> },
    <span class="hljs-string">"loadstart"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> },
    <span class="hljs-string">"loadend"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> },
    <span class="hljs-string">"readystatechange"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{ <span class="hljs-comment">/* logic... */</span> }

    <span class="hljs-comment">// load and error handle via Promise then/catch</span>
    <span class="hljs-comment">// however, supplying the events will still fire them</span>
    <span class="hljs-comment">// "load": function(event) { /* logic... */ }</span>
    <span class="hljs-comment">// "error": function(event) { /* logic... */ }</span>
});</code></pre><p><a name="instance-methods-run"></a>
➜ <strong>instance.run</strong> &mdash; Runs the request.</p>
<ul class="list">
<li><strong>No Parameters</strong></li>
<li><strong>Returns</strong> a <code>Promise</code>.</li>
</ul>
<p><strong>Note</strong>: This function does a bit more than just running the http request. It does the following:</p>
<ul class="list">
<li>Works the XHR request by normalizing options.</li>
<li>Applies any provided event listeners.</li>
<li>Sets any provided headers.</li>
<li>Processes provided data.</li>
<li>Locks the instance (once locked the instance can no longer be modified via instance methods)</li>
<li>Sends the request.</li>
</ul>
<p><em>Because of this <code>instance.run</code> should be called at the very last</em>.</p>
<pre class="hljs"><code>req.run();</code></pre><p><a name="instance-methods-getprop"></a>
➜ <strong>instance.getProp(property)</strong> &mdash; Gets an http object property.</p>
<p><strong>Note</strong>: This method is more of a debugger method as nearly all of the gettable properties can be retrieved only <em>after</em> the request has been run via the <code>instance.run</code> method.</p>
<ul class="list">
<li><code>property</code> (<code>String</code>, <em>Required</em>)<ul class="list">
<li>Gettable properties:<ul class="list">
<li><code>callbacks</code>: Object containing all the provided callbacks.</li>
<li><code>aborted</code>: Boolean representing whether the request was aborted or not.</li>
<li><code>locked</code>: Boolean representing whether the request instance has locked. Gets locked after running the request via <code>instance.run</code>.</li>
<li><code>opened</code>: Boolean representing whether the request has been opened.</li>
<li><code>resolved</code>: Boolean representing whether the request has been resolved.</li>
<li><code>rejected</code>: Boolean representing whether the request has been rejected.</li>
<li><code>path</code>: String representing the path the request has taken.<ul class="list">
<li>example path: <code>&quot;created;unsent;headers-received;loading;finished;done;resolved&quot;</code></li>
<li>path shows, among other things, that the request was created and finally resolved.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Returns</strong> the http instance property&#39;s value.</li>
</ul>
<pre class="hljs"><code>req.getProp(<span class="hljs-string">"aborted"</span>); <span class="hljs-comment">// returns Boolean representing whether the request was aborted or not</span></code></pre><p><a name="instance-methods-abort"></a>
➜ <strong>instance.abort</strong> &mdash; Aborts request.</p>
<ul class="list">
<li><strong>No Parameters</strong></li>
<li><strong>Returns</strong> Nothing.</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">// Aborts http request.</span>
req.abort();</code></pre><p><a name="usage"></a></p>
<h3 id="usage">Usage</h3>
<p><a name="usage-examples-toc"></a></p>
<ul class="list">
<li><a href="#usage-examples">Examples</a><ul class="list">
<li><a href="#handling-http-errors">Handling HTTP Errors</a></li>
<li><a href="#example-post">POST</a></li>
<li><a href="#example-get">GET</a></li>
<li><a href="#example-form-upload">Form Upload</a></li>
<li><a href="#example-file-upload">File Upload</a></li>
<li><a href="#example-post-json">Post JSON</a></li>
<li><a href="#example-parse-json">Parse JSON</a></li>
</ul>
</li>
</ul>
<p><a name="usage-examples"></a></p>
<h3 id="examples">Examples</h3>
<p><a name="handling-http-errors"></a>
<strong>Handling HTTP Errors</strong> &mdash; A custom function is needed to handle HTTP errors.</p>
<p>See below examples to understand how to use the following function.</p>
<pre class="hljs"><code><span class="hljs-comment">// custom function to check status of request</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">check_status</span>(<span class="hljs-params">xhr</span>) </span>{
    <span class="hljs-keyword">if</span> ((xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &amp;&amp; xhr.readyState === <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> xhr; <span class="hljs-comment">// no HTTP error</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(xhr);
}</code></pre><p><a name="example-post"></a>
<strong>POST</strong> &mdash; <code>POST</code> call.</p>
<pre class="hljs"><code><span class="hljs-comment">// create a new http request</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"test.php"</span>);
<span class="hljs-comment">// set wanted options</span>
req.method(<span class="hljs-string">"POST"</span>);
<span class="hljs-comment">// data as a string or within an object maybe passed</span>
<span class="hljs-comment">// req.data({ "msg": "Hello World!!", "name": "Selena Gomez", "simple_post": "✔" }); // object data</span>
req.data(<span class="hljs-string">"msg=Hello World!&amp;name=Selena Gomez&amp;simple_post=✔"</span>); <span class="hljs-comment">// string data</span>
<span class="hljs-comment">// run the req</span>
req.run()
    .then(check_status)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
    });</code></pre><p><a name="example-get"></a>
<strong>GET</strong> &mdash; <code>GET</code> request.</p>
<pre class="hljs"><code><span class="hljs-comment">// create a new http request</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"test.php?verified=✔&amp;simple_get=✔"</span>);
<span class="hljs-comment">// run the req</span>
req.run()
    .then(check_status)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
    });</code></pre><p><a name="example-form-upload"></a>
<strong>Form Upload</strong> &mdash; <code>HTML</code> form upload to <code>PHP</code> script.</p>
<pre class="hljs"><code><span class="hljs-comment">// get form element from DOM</span>
<span class="hljs-keyword">var</span> form = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"form"</span>);

<span class="hljs-comment">// create a new http request</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"formsubmit.php"</span>);
<span class="hljs-comment">// set wanted options</span>
req.method(<span class="hljs-string">"POST"</span>);
req.data(<span class="hljs-keyword">new</span> FormData(form)); <span class="hljs-comment">// form data</span>

<span class="hljs-comment">// run the req</span>
req.run()
    .then(check_status)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
    });</code></pre><p><a name="example-file-upload"></a>
<strong>File Upload</strong> &mdash; Multiple file upload to <code>PHP</code> script.</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"images[]"</span> <span class="hljs-attr">multiple</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre><pre class="hljs"><code><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"file"</span>).addEventListener(<span class="hljs-string">"change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">// cache the input form, the parent in this case</span>
    <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>.parentNode;
    <span class="hljs-keyword">var</span> form_data = <span class="hljs-keyword">new</span> FormData(),
        files = <span class="hljs-keyword">this</span>.files,
        file;
    <span class="hljs-comment">// loop through files to add to FormData object</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = files.length; i &lt; l; i++) {
        file = files.item(i);
        form_data.append(<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"name"</span>), file, file.name);
    }
    <span class="hljs-comment">// upload files to server</span>
    <span class="hljs-comment">// create a new http request</span>
    <span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"test.php?files=✔"</span>);
    <span class="hljs-comment">// set wanted options</span>
    req.method(<span class="hljs-string">"POST"</span>);
    req.data(form_data); <span class="hljs-comment">// form data</span>
    req.fileUpload(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// run the req</span>
    req.run()
        .then(check_status)
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
            form.reset(); <span class="hljs-comment">// reset form</span>
        })
        .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
            form.reset(); <span class="hljs-comment">// reset form</span>
        });
});</code></pre><p><a name="example-post-json"></a>
<strong>Post JSON</strong> &mdash; Set <code>postJSON</code> flag to stringify data.</p>
<pre class="hljs"><code><span class="hljs-comment">// create a new http request</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"test.php?json=✔"</span>);
<span class="hljs-comment">// set wanted options</span>
req.method(<span class="hljs-string">"POST"</span>);
req.postJSON(<span class="hljs-literal">true</span>); <span class="hljs-comment">// stringify via JSON.stringify</span>
req.header(<span class="hljs-string">"content-type"</span>, <span class="hljs-string">"application/json"</span>);
req.data({ <span class="hljs-comment">// object data</span>
    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"Hello World!!"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"Selena Gomez"</span>
});
req.processData(<span class="hljs-literal">false</span>);
<span class="hljs-comment">// run the req</span>
req.run()
    .then(check_status)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
    });</code></pre><p><a name="example-parse-json"></a>
<strong>Parse JSON</strong> &mdash; Set <code>parseJSON</code> flag to parse returned data.</p>
<pre class="hljs"><code><span class="hljs-comment">// create a new http request</span>
<span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> http(<span class="hljs-string">"test.php?verified=✔&amp;return_json=✔"</span>);
<span class="hljs-comment">// set wanted options</span>
<span class="hljs-comment">// will try and parse the requests responseText</span>
<span class="hljs-comment">// if successfully parsed the value will be set the</span>
<span class="hljs-comment">// XHRs responseJSON property. the JSON can then be</span>
<span class="hljs-comment">// accessed like so, var json = xhr.responseJSON;</span>
req.parseJSON(<span class="hljs-literal">true</span>);
<span class="hljs-comment">// run the req</span>
req.run()
    .then(check_status)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The Server Response:"</span>, xhr);
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The XHR Error:"</span>, xhr);
    });</code></pre><p><a name="contributing"></a></p>
<h3 id="contributing">Contributing</h3>
<p>Contributions are welcome! Found a bug, feel like documentation is lacking/confusing and needs an update, have performance/feature suggestions or simply found a typo? Let me know! :)</p>
<p>See how to contribute <a href="https://github.com/cgabriel5/http/blob/master/CONTRIBUTING.md">here</a>.</p>
<h3 id="todo">TODO</h3>
<ul class="list">
<li>[ ] Clean/re-work code.</li>
<li>[ ] Add a global <code>http.get</code> method to be able to access a request using its ID from anywhere.</li>
</ul>
<p><a name="license"></a></p>
<h3 id="license">License</h3>
<p>This project uses the <a href="https://github.com/cgabriel5/http/blob/master/LICENSE.txt">MIT License</a>.</p>
    </article>
</body>

</html>
